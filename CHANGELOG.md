# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.1.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [0.3.0] - 2026-02-20

### Added

- **Generic knowledge graph builder**: build-kg now supports any topic, not just regulatory domains
- **Automatic ontology generation**: Claude Code skill auto-generates graph ontology (node types, edge types, properties) for any topic
- **OntologyConfig models**: `NodeDef`, `EdgeDef`, `OntologyConfig` Pydantic models in `domain.py`
- **Ontology-driven parsing**: `parse.py` and `parse_batch.py` dynamically create graph nodes/edges from ontology definition
- **Ontology-driven graph setup**: `setup_graph.py` creates vertex labels from ontology instead of hardcoded regulatory labels
- **`--ontology` CLI flag** on `build-kg-parse`, `build-kg-parse-batch`, and `build-kg-setup`
- **`metadata` JSONB column** on `source_document` and `source_fragment` tables for generic topic metadata
- **Generic JSON format**: `{entities: [...], relationships: [...]}` for ontology-driven LLM output
- Explicit ontology sections in all regulatory profiles (`food-safety`, `financial-aml`, `data-privacy`)
- `load_ontology()` function for loading standalone ontology YAML files
- HTML usage guide (`docs/guide.html`)

### Changed

- `default.yaml` is now a truly generic profile with empty parsing config (ontology auto-generated by skill)
- `source_document` and `source_fragment`: `jurisdiction`, `authority`, `doc_type` columns are now nullable
- `KGParser` class (renamed from `RegulatoryParser`, backward-compatible alias kept)
- `build_prompt()` routes between ontology-driven and legacy regulatory prompt templates
- Claude Code `/build-kg` skill rewritten for generic topic support with Phase 0.5 ontology generation
- README rebranded from regulatory-specific to generic knowledge graph builder
- All documentation updated to reflect generic capabilities
- Regulatory profiles now include explicit `deontic_modalities` and `constraint_logic_types` (no longer inherited from default)

### Fixed

- Profile inheritance with empty default lists no longer breaks regulatory profile loading

## [0.2.1] - 2026-02-19

### Changed

- Rewrote README.md with developer-focused positioning and industry use cases
- Updated CONTRIBUTING.md with domain profile contribution guide and example profile ideas
- Updated pyproject.toml description, keywords, and classifiers for discoverability
- Updated quickstart tutorial version reference
- Added CI badge to README

## [0.2.0] - 2026-02-18

### Added

- **Domain profile system**: YAML-based domain profiles that parameterize the pipeline for different regulatory areas
- Built-in profiles: `food-safety` (default), `financial-aml`, `data-privacy`, `default` (generic)
- `DOMAIN` environment variable and `--domain` CLI flag for profile selection
- Profile inheritance via `extends` field for DRY configuration
- Custom profile support via file path (`--domain /path/to/profile.yaml`)
- `build-kg-domains` command to list available profiles
- Shared `build_prompt()` function eliminates prompt duplication between parse.py and parse_batch.py
- `pyyaml` dependency for YAML profile loading

### Changed

- `parse.py` and `parse_batch.py` read prompt components from the active domain profile
- `id_extractors.py` accepts optional profile for pattern configuration
- Claude Code `/build-kg` skill reads search templates and sub-domain checklists from profiles
- Updated pyproject.toml description and keywords for broader regtech scope
- Version bump to 0.2.0

## [0.1.0] - 2026-02-18

### Added

- Initial release of build-kg
- Web crawler (`build-kg-crawl`) using Crawl4AI for regulatory websites
- Document chunker (`build-kg-chunk`) using Unstructured library
- Database loader (`build-kg-load`) for PostgreSQL with manifest-based metadata
- Regulatory parser (`build-kg-parse`) using OpenAI GPT-4o-mini
- Batch parser (`build-kg-parse-batch`) using OpenAI Batch API (50% cheaper)
- Apache AGE graph setup (`build-kg-setup`) for knowledge graph creation
- Setup verification (`build-kg-verify`) for database, AGE, and API checks
- Provision ID extraction with regex patterns for CA, US, and generic formats
- Docker Compose setup for PostgreSQL + Apache AGE
- Claude Code `/build-kg` skill with 5-round comprehensive source discovery
- Support for 20 jurisdictions (CA, US, EU, UK, AU, NZ, JP, SG, MY, TH, KR, CN, IN, AE, SA, BR, MX, ZA, and more)
- Documentation: architecture guide, quickstart tutorial, Singapore F&B tutorial
- CLI reference docs for all commands
- Example manifests for Canada and Singapore
