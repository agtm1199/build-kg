# build-kg v0.1.0 — Initial Release

**Date:** 2026-02-18
**License:** Apache 2.0

---

## Summary

First public release of build-kg — a Claude Code skill that turns any topic into a structured knowledge graph stored in Apache AGE (PostgreSQL).

One command. Fully autonomous. No vendor lock-in.

```
/build-kg full regulatory compliance landscape of Singapore for F&B
```

Claude autonomously researches sources, crawls official websites, chunks documents, loads to PostgreSQL, parses with GPT-4o-mini, and outputs a queryable knowledge graph.

---

## What's Included

### Claude Code Skill

- **`/build-kg` skill** — fully autonomous 6-phase pipeline orchestrated by Claude
- **5-round source discovery** — systematic methodology to find authoritative sources for any topic
- Crawl manifest generation with metadata, priority tiers, and coverage tracking

### CLI Tools (6 commands)

| Command | Description |
|---------|-------------|
| `build-kg-crawl` | Crawl websites to markdown using Crawl4AI (headless Chromium) |
| `build-kg-chunk` | Split documents into semantically coherent JSON fragments (Unstructured) |
| `build-kg-load` | Load chunks into PostgreSQL with manifest-based metadata |
| `build-kg-parse` | Parse fragments into graph nodes using OpenAI GPT-4o-mini (sync) |
| `build-kg-parse-batch` | Parse using OpenAI Batch API — 50% cheaper, 1-24 hour turnaround |
| `build-kg-setup` | Create Apache AGE extension and graph schema |
| `build-kg-verify` | Verify database, AGE extension, and API key configuration |

### Graph Schema

Provision → Requirement → Constraint ontology with machine-testable constraints:

```
(Provision) <--[DERIVED_FROM]-- (Requirement) --[HAS_CONSTRAINT]--> (Constraint)
```

- **Provision**: regulatory text fragment with ID, authority, jurisdiction
- **Requirement**: obligation, prohibition, permission, etc. with deontic modality
- **Constraint**: threshold, pattern, enumeration, or boolean — machine-testable

### Provision ID Extraction

- Regex-based extraction for CFIA (`B.01.008.2`), US CFR (`21 CFR 101.61`), and generic formats
- Authority-specific pattern priority ordering
- Exclusion filters for false positives (years, percentages, measurements)
- LLM fallback when regex fails
- Validation with authority-specific format rules

### Database

- Docker Compose setup for PostgreSQL + Apache AGE
- `source_document` and `source_fragment` relational tables
- `market_code` enum with 20 jurisdictions (CA, US, EU, UK, AU, NZ, JP, SG, MY, TH, KR, CN, IN, AE, SA, BR, MX, ZA, OTHER)
- `doc_type` enum (regulation, standard, guidance, code, act, directive, order)

### Documentation

- Architecture guide — pipeline, graph ontology, DB schema, ID extraction
- Quickstart tutorial — zero to working graph in 10 steps
- Singapore F&B tutorial — full worked example with 12 sources
- CLI reference pages for all commands (crawl, chunk, load, parse)
- Manifest format specification
- Troubleshooting guide with 13 detailed solutions

### Test Suite

- 71 tests across 4 test modules
- Domain profile loading, inheritance, and validation tests
- ID extractor pattern matching and validation tests
- Configuration loading and validation tests
- Manifest format tests

---

## Tech Stack

| Component | Technology |
|-----------|-----------|
| Graph database | Apache AGE (PostgreSQL extension) |
| Web crawling | Crawl4AI (headless Chromium) |
| Document chunking | Unstructured |
| LLM parsing | OpenAI GPT-4o-mini |
| Database | PostgreSQL 16 |
| Language | Python 3.10+ |
| Configuration | Pydantic models + YAML profiles |
| Container | Docker Compose |

---

## Supported Jurisdictions

CA, US, EU, UK, AU, NZ, JP, SG, MY, TH, KR, CN, IN, AE, SA, BR, MX, ZA, OTHER

---

## Cost

Only LLM API calls during parsing. Everything else runs locally for free.

| Fragments | Sync Parser | Batch Parser (50% off) |
|-----------|-------------|------------------------|
| 100 | ~$0.03 | ~$0.015 |
| 1,000 | ~$0.30 | ~$0.15 |
| 5,000 | ~$1.50 | ~$0.75 |
| 10,000 | ~$3.00 | ~$1.50 |

---

## Getting Started

```bash
git clone https://github.com/agtm1199/build-kg.git
cd build-kg
make setup
```

Or with Claude Code:

```
/build-kg kubernetes networking
```

---

## Stats

- 56 files
- 17,736 lines of code
- 6 CLI commands
- 71 tests
- 13 documentation pages
- 20 supported jurisdictions

---

## Links

- Repository: https://github.com/agtm1199/build-kg
- PyPI: `pip install build-kg`
- Documentation: `docs/guide.html`
- License: Apache 2.0
